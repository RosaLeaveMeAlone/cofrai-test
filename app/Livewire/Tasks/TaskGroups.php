<?php

namespace App\Livewire\Tasks;

use App\Http\Traits\WithTable;
use App\Models\TaskGroup;
use Barryvdh\Debugbar\Facades\Debugbar;
use Livewire\Component;
use Livewire\WithPagination;

class TaskGroups extends Component
{
    use WithTable;

    // -----------------------------------------------------------------------------------------------------------------
    // @ Rules
    // -----------------------------------------------------------------------------------------------------------------

    // -----------------------------------------------------------------------------------------------------------------
    // @ Listeners
    // -----------------------------------------------------------------------------------------------------------------

    // -----------------------------------------------------------------------------------------------------------------
    // @ Lifecycle Hooks
    // -----------------------------------------------------------------------------------------------------------------

    // -----------------------------------------------------------------------------------------------------------------
    // @ Computed Properties
    // -----------------------------------------------------------------------------------------------------------------
    public function getTaskGroupsQueryProperty()
    {
        return TaskGroup::filter(
            $this->search,
            'id',
            'ASC',
            auth()->id(),
        );
    }

    public function getTaskGroupsProperty()
    {
        $taskGroupsQuery = clone $this->task_groups_query;

        return $taskGroupsQuery->paginate(2);
    }
    // -----------------------------------------------------------------------------------------------------------------
    // @ Public Functions
    // -----------------------------------------------------------------------------------------------------------------

    // -----------------------------------------------------------------------------------------------------------------
    // @ Private Functions
    // -----------------------------------------------------------------------------------------------------------------

    // -----------------------------------------------------------------------------------------------------------------
    // @ Render
    // -----------------------------------------------------------------------------------------------------------------
    
    public function render()
    {
        return view('livewire.tasks.task-groups');
    }
}